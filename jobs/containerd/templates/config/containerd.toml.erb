root = "/var/vcap/data/containerd/root"
state = "/var/vcap/data/containerd/state"
subreaper = true
oom_score = -999
disabled_plugins = [
  "aufs",
  "overlayfs",
  "zfs",
  "walking",
  "scheduler",
  "content-service",
  "diff-service",
  "images-service",
  "namespaces-service",
  "snapshots-service",
  "content",
  "diff",
  "events",
  "images",
  "namespaces",
  "snapshots",
  "version",
  "cri"
]

[grpc]
address = "/var/vcap/data/containerd/sockets/containerd.sock"
level = "debug"
<% if p("garden.experimental_rootless_mode") %>
uid = 4294967294
gid = 4294967294
<% end %>

[debug]
address = "/var/vcap/data/containerd/sockets/debug.sock"
level = "debug"
<% if p("garden.experimental_rootless_mode") %>
uid = 4294967294
gid = 4294967294
<% end %>

<% if p("garden.experimental_rootless_mode") %>
[plugins]
  [plugins.linux]
    runtime_root = "/var/vcap/data/containerd/runc/user/4294967294"
    shim_debug = true
<% end %>
